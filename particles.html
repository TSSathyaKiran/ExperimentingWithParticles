<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PARTICLES</title>
</head>
<body>
    <canvas id = "particle"></canvas>
    <script>
        const canvasElement = document.getElementById("particle");
        const canvas = canvasElement.getContext('2d');

        function resizeCanvas() {
        canvasElement.width = window.innerWidth - 18;
        canvasElement.height = window.innerHeight - 20;
    }
        resizeCanvas();

        window.addEventListener('resize', resizeCanvas);

        function draw(x, y, c, s) {
            canvas.fillStyle = c
            canvas.fillRect(x, y, s, s)
        }

        particle1 = {
            "x" : 150,
            "y" : canvasElement.height/2,
            "vx" : 0,
            "vy" : 0,
            "color" : "red"
        }

        particle3 = {
            "x" : canvasElement.width/2,
            "y" : 150,
            "vx" : 0,
            "vy" : 0,
            "color" : "green"
        }

        particle2 = {
            "x" : canvasElement.width - 150,
            "y" : canvasElement.height/2,
            "vx" : 0,
            "vy" : 0,
            "color" : "yellow"
        }

        particle4 = {
            "x" : canvasElement.width/2,
            "y" : canvasElement.height - 150,
            "vx" : 0,
            "vy" : 0,
            "color" : "blue"
        }

        let particles = []
        particles.push(particle1)
        particles.push(particle2)
        particles.push(particle3)
        particles.push(particle4)

        function force(particles1, particles2, g){
            for(let i=0; i<particles1.length; i++){
                fx = 0;
                fy = 0;
                for(let j=0; j<particles2.length; j++){
                    a = particles1[i]
                    b = particles2[j]
                    dx = a.x - b.x
                    dy = a.y - b.y
                    d = Math.sqrt(dx*dx + dy*dy);

                    if(d > 0){
                        F = g * 1/d
                        fx += (F * dx)
                        fy += (F * dy)
                    }
                }

                a.vx = (a.vx + fx) 
                a.vy = (a.vy + fy) 
                a.x += a.vx
                a.y += a.vy
                if(a.x <= 0 || a.x >= canvasElement.width){
                    a.vx *= -1
                }
                if(a.y <= 0 || a.y >= canvasElement.height){
                    a.vy *= -1
                }
                
            }
        }
        function update() {

            force(particles, particles, -.1)
            canvas.clearRect(0, 0, canvasElement.width, canvasElement.height)
            draw(0, 0, "black", canvasElement.width)
            draw(particle1.x, particle1.y, particle1.color, 30)
            draw(particle2.x, particle2.y, particle2.color, 30)
            draw(particle3.x, particle3.y, particle3.color, 30)
            draw(particle4.x, particle4.y, particle4.color, 30)
            requestAnimationFrame(update)
        }

        update();

    </script>
</body>
</html>